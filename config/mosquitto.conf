# Minimal Mosquitto config for local testing
# Listener on default MQTT port
listener 1883 0.0.0.0

# Max packet size (10MB)
max_packet_size 10485760

# Enable persistence for QoS 1/2 reliable delivery
# Required for session resume and message redelivery after client reconnect
persistence true
persistence_location /mosquitto/data/

# Increase queue limits for crash recovery testing
# These are important for reliable message delivery during client crashes
max_queued_messages 100000
max_inflight_messages 1000
max_queued_bytes 0

# Session expiration for persistent clients (clean_session=false)
# Keep sessions for 1 day after disconnect to allow crash recovery testing
persistent_client_expiration 1d

# Save persistence database more frequently during tests (every 30 seconds)
autosave_interval 30

# Allow anonymous clients for local perf testing (do not use in production)
allow_anonymous true

# Logging
log_type error
log_type warning
log_type notice
#log_type information
